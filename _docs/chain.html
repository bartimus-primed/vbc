<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="x-ua-compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>chain | vdoc</title>
		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600&display=swap" rel="stylesheet">
		<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
		<link rel="manifest" href="site.webmanifest">
		<link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
		<meta name="msapplication-TileColor" content="#da532c">
		<meta name="theme-color" content="#ffffff">
		
		<link rel="stylesheet" href="doc.css" />
		<link rel="stylesheet" href="normalize.css" />
		<script src="dark-mode.js"></script>
	</head>
	<body>
		<div id="page">
			<header class="doc-nav hidden">
				<div class="heading-container">
					<div class="heading">
						<div class="info">
							<div class="module">vbc</div>
							<div class="toggle-version-container">
								<span>0.0.1</span>
								<div id="dark-mode-toggle" role="switch" aria-checked="false" aria-label="Toggle dark mode"><svg xmlns="http://www.w3.org/2000/svg" class="light-icon" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"/></svg>
<svg xmlns="http://www.w3.org/2000/svg" class="dark-icon" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24"><g><rect fill="none" height="24" width="24"/></g><g><g><g><path d="M11.1,12.08C8.77,7.57,10.6,3.6,11.63,2.01C6.27,2.2,1.98,6.59,1.98,12c0,0.14,0.02,0.28,0.02,0.42 C2.62,12.15,3.29,12,4,12c1.66,0,3.18,0.83,4.1,2.15C9.77,14.63,11,16.17,11,18c0,1.52-0.87,2.83-2.12,3.51 c0.98,0.32,2.03,0.5,3.11,0.5c3.5,0,6.58-1.8,8.37-4.52C18,17.72,13.38,16.52,11.1,12.08z"/></g><path d="M7,16l-0.18,0C6.4,14.84,5.3,14,4,14c-1.66,0-3,1.34-3,3s1.34,3,3,3c0.62,0,2.49,0,3,0c1.1,0,2-0.9,2-2 C9,16.9,8.1,16,7,16z"/></g></g></svg>
</div>
							</div>
							<svg xmlns="http://www.w3.org/2000/svg" id="toggle-menu" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>

						</div>
						<input type="text" id="search" placeholder="Search... (beta)" autocomplete="off">
					</div>
				</div>
				<nav class="search hidden"></nav>
				<nav class="content hidden">
					<ul>
						<li class="open"><div class="menu-row"><a href="./main.html">main</a></div></li><li class="open active"><div class="menu-row"><a href="./chain.html">chain</a></div></li><li class="open"><div class="menu-row"><a href="./entities.html">entities</a></div></li>
					</ul>
				</nav>
			</header>
			<div class="doc-scrollview">
				<div class="doc-container">
					<div class="doc-content">
						<section id="readme_chain" class="doc-node">
							<div class="title"><h1> chain <a href="#readme_chain">#</a></h1></div>

</section>

						<section id="new_transaction" class="doc-node">
							<div class="title"><h2>fn new_transaction <a href="#new_transaction">#</a></h2></div><pre class="signature"><code><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">new_transaction</span><span class="token punctuation">(</span>to <span class="token operator">&</span>entities<span class="token punctuation">.</span>User<span class="token punctuation">,</span> from <span class="token operator">&</span>entities<span class="token punctuation">.</span>User<span class="token punctuation">,</span> item <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">&</span>Transaction</code></pre>
<p>new_transaction needs a <code>to</code> and <code>from</code> <code>&amp;entities.User</code> as well as an item that is being tracked.  and returns a transaction structure that can be applied to the transaction chain.</p>

</section>
						<section id="create_hash_block" class="doc-node">
							<div class="title"><h2>fn create_hash_block <a href="#create_hash_block">#</a></h2></div><pre class="signature"><code><span class="token keyword">fn</span> <span class="token function">create_hash_block</span><span class="token punctuation">(</span>block <span class="token operator">&</span>Block<span class="token punctuation">,</span> proof <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">&</span>Hash_Block</code></pre>
<p>create_hash_block used internally to create a hashblock with proof</p>

</section>
						<section id="create_new_blockchain" class="doc-node">
							<div class="title"><h2>fn create_new_blockchain <a href="#create_new_blockchain">#</a></h2></div><pre class="signature"><code><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">create_new_blockchain</span><span class="token punctuation">(</span>satisfaction_pattern <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">&</span>Block_Chain</code></pre>
<p>create_new_blockchain takes a single argument which is the satisifaction pattern needed  ex: if the calculated hash needs to start with aaaa then you would call create_new_blockchain(&quot;aaaa&quot;)   this returns a blockchain that when commited to, will enforce the pattern  Theoretically if you are using this for secure system logging, you could  get rid of this pattern so no proof of work is required.</p>

</section>
						<section id="new_transaction_chain" class="doc-node">
							<div class="title"><h2>fn new_transaction_chain <a href="#new_transaction_chain">#</a></h2></div><pre class="signature"><code><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">new_transaction_chain</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&</span>Transaction_Chain</code></pre>
<p>new_transaction_chain creates a new list of transactions, I was going to join this into the blockchain  structure, but wanted to keep the option open of having multiple transaction chains that can be queued</p>

</section>
						<section id="Hash_Block" class="doc-node">
							<div class="title"><h2>struct Hash_Block <a href="#Hash_Block">#</a></h2></div><pre class="signature"><code><span class="token punctuation">[</span>heap<span class="token punctuation">]</span>
<span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token symbol">Hash_Block</span> <span class="token punctuation">{</span>
	hash  <span class="token builtin">string</span>
	proof <span class="token builtin">string</span>
	block Block
<span class="token punctuation">}</span></code></pre>
<p>Hash_Block simply keeps a block and it's hash together, making it easier to look up a transaction</p>

</section>
						<section id="Block_Chain" class="doc-node">
							<div class="title"><h2>struct Block_Chain <a href="#Block_Chain">#</a></h2></div><pre class="signature"><code><span class="token punctuation">[</span>heap<span class="token punctuation">]</span>
<span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token symbol">Block_Chain</span> <span class="token punctuation">{</span>
	satisfaction_pattern <span class="token builtin">string</span>
<span class="token keyword">mut</span><span class="token punctuation">:</span>
	blocks <span class="token punctuation">[</span><span class="token punctuation">]</span>Hash_Block
<span class="token punctuation">}</span></code></pre>
<p>Block_Chain holds an array of Hash_Block structures which hold Block structures.  the satisfaction pattern is used when checking for work.</p>

</section>
						<section id="Block_Chain.commit_block" class="doc-node">
							<div class="title"><h2>fn (Block_Chain) commit_block <a href="#Block_Chain.commit_block">#</a></h2></div><pre class="signature"><code><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token keyword">mut</span> bc Block_Chain<span class="token punctuation">)</span> <span class="token function">commit_block</span><span class="token punctuation">(</span><span class="token keyword">mut</span> transactions Transaction_Chain<span class="token punctuation">,</span> proof <span class="token builtin">string</span><span class="token punctuation">)</span></code></pre>
<p>commit_block takes in the mutable transaction chain and the proof.  It will check the proof and chain hash results in the satisfaction pattern.  Call the function with an empty string if no satisfaction pattern is required.</p>

</section>
						<section id="Block_Chain.init_genesis" class="doc-node">
							<div class="title"><h2>fn (Block_Chain) init_genesis <a href="#Block_Chain.init_genesis">#</a></h2></div><pre class="signature"><code><span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token keyword">mut</span> bc Block_Chain<span class="token punctuation">)</span> <span class="token function">init_genesis</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<p>init_genesis initializes the blockchain, using a <code>transaction</code> value and <code>previous_hash</code> value of <code>GENESIS</code>  called internally during creation</p>

</section>
						<section id="Block_Chain.check_block_proof" class="doc-node">
							<div class="title"><h2>fn (Block_Chain) check_block_proof <a href="#Block_Chain.check_block_proof">#</a></h2></div><pre class="signature"><code><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token punctuation">(</span>bc Block_Chain<span class="token punctuation">)</span> <span class="token function">check_block_proof</span><span class="token punctuation">(</span>transactions Transaction_Chain<span class="token punctuation">,</span> proof <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">&</span>Block<span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">)</span></code></pre>
<p>check_block_proof takes in a given Transaction_Chain and a proof string value  this can be called from some loop that needs to check different proofs (aka mining)</p>

</section>
						<section id="Block_Chain.validate_block" class="doc-node">
							<div class="title"><h2>fn (Block_Chain) validate_block <a href="#Block_Chain.validate_block">#</a></h2></div><pre class="signature"><code><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token punctuation">(</span>bc Block_Chain<span class="token punctuation">)</span> <span class="token function">validate_block</span><span class="token punctuation">(</span>block_hash <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span></code></pre>
<p>validate_block takes in a hash from a block and checks for it's presence in the chain  a wallet could use this to track transactions with some additional additions</p>

</section>
						<section id="Block_Chain.create_new_block" class="doc-node">
							<div class="title"><h2>fn (Block_Chain) create_new_block <a href="#Block_Chain.create_new_block">#</a></h2></div><pre class="signature"><code><span class="token keyword">fn</span> <span class="token punctuation">(</span>bc Block_Chain<span class="token punctuation">)</span> <span class="token function">create_new_block</span><span class="token punctuation">(</span>transactions <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">&</span>Block</code></pre>
<p>create_new_block is used internally to create a new block, it holds transactions</p>

</section>
						<section id="Block" class="doc-node">
							<div class="title"><h2>struct Block <a href="#Block">#</a></h2></div><pre class="signature"><code><span class="token punctuation">[</span>heap<span class="token punctuation">]</span>
<span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token symbol">Block</span> <span class="token punctuation">{</span>
	transactions  <span class="token builtin">string</span>
	previous_hash <span class="token builtin">string</span>
<span class="token punctuation">}</span></code></pre>
<p>Block is the basic structure.  It contains a list of transactions, the proof used to check them, and the previous hash</p>

</section>
						<section id="Block.to_string" class="doc-node">
							<div class="title"><h2>fn (Block) to_string <a href="#Block.to_string">#</a></h2></div><pre class="signature"><code><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token punctuation">(</span>b Block<span class="token punctuation">)</span> <span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span></code></pre>
<p>to_string is a helper function, probably not needed, but it exists.</p>

</section>
						<section id="Transaction" class="doc-node">
							<div class="title"><h2>struct Transaction <a href="#Transaction">#</a></h2></div><pre class="signature"><code><span class="token punctuation">[</span>heap<span class="token punctuation">]</span>
<span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token symbol">Transaction</span> <span class="token punctuation">{</span>
	to   <span class="token operator">&</span>entities<span class="token punctuation">.</span>User
	from <span class="token operator">&</span>entities<span class="token punctuation">.</span>User
	item <span class="token builtin">string</span>
<span class="token punctuation">}</span></code></pre>
<p>Transaction is a very simple structure, it consists of <code>to</code> and <code>from</code> of type <code>&amp;entities.User</code>  the transaction contains an <code>item</code> of type <code>string</code>. I originally had this item as a generic  but I was running into issues with heap structures being generic, when attempting to hash them  might revisit this when generics are more seasoned.</p>

</section>
						<section id="Transaction_Chain" class="doc-node">
							<div class="title"><h2>struct Transaction_Chain <a href="#Transaction_Chain">#</a></h2></div><pre class="signature"><code><span class="token punctuation">[</span>heap<span class="token punctuation">]</span>
<span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token symbol">Transaction_Chain</span> <span class="token punctuation">{</span>
<span class="token keyword">pub</span> <span class="token keyword">mut</span><span class="token punctuation">:</span>
	transactions <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&</span>Transaction
<span class="token punctuation">}</span></code></pre>
<p>Transaction_Chain holds a list of transactions that are not applied to the <code>Block_Chain</code>.  When commited the blockchain the transaction chain gets wiped.</p>

</section>
						<section id="Transaction_Chain.flush_transaction_chain" class="doc-node">
							<div class="title"><h2>fn (Transaction_Chain) flush_transaction_chain <a href="#Transaction_Chain.flush_transaction_chain">#</a></h2></div><pre class="signature"><code><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token keyword">mut</span> tc Transaction_Chain<span class="token punctuation">)</span> <span class="token function">flush_transaction_chain</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<p>flushed_transaction_chain resets the list to empty. Should only be called after a successful commit.</p>

</section>
						<section id="Transaction_Chain.to_string" class="doc-node">
							<div class="title"><h2>fn (Transaction_Chain) to_string <a href="#Transaction_Chain.to_string">#</a></h2></div><pre class="signature"><code><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token punctuation">(</span>tc Transaction_Chain<span class="token punctuation">)</span> <span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span></code></pre>
<p>to_string converts the <code>Transaction_Chain</code> to a string, used for hashing.</p>

</section>

						<div class="footer">
							Powered by vdoc. Generated on: 3 Jun 2021 11:43:53
						</div>
					</div>
					<div class="doc-toc"><ul><li class="open"><a href="#new_transaction">fn new_transaction</a>        <ul>
</ul>
</li>
<li class="open"><a href="#create_hash_block">fn create_hash_block</a>        <ul>
</ul>
</li>
<li class="open"><a href="#create_new_blockchain">fn create_new_blockchain</a>        <ul>
</ul>
</li>
<li class="open"><a href="#new_transaction_chain">fn new_transaction_chain</a>        <ul>
</ul>
</li>
<li class="open"><a href="#Hash_Block">struct Hash_Block</a>        <ul>
</ul>
</li>
<li class="open"><a href="#Block_Chain">struct Block_Chain</a>        <ul>
<li><a href="#Block_Chain.commit_block">fn commit_block</a></li>
<li><a href="#Block_Chain.init_genesis">fn init_genesis</a></li>
<li><a href="#Block_Chain.check_block_proof">fn check_block_proof</a></li>
<li><a href="#Block_Chain.validate_block">fn validate_block</a></li>
<li><a href="#Block_Chain.create_new_block">fn create_new_block</a></li>
</ul>
</li>
<li class="open"><a href="#Block">struct Block</a>        <ul>
<li><a href="#Block.to_string">fn to_string</a></li>
</ul>
</li>
<li class="open"><a href="#Transaction">struct Transaction</a>        <ul>
</ul>
</li>
<li class="open"><a href="#Transaction_Chain">struct Transaction_Chain</a>        <ul>
<li><a href="#Transaction_Chain.flush_transaction_chain">fn flush_transaction_chain</a></li>
<li><a href="#Transaction_Chain.to_string">fn to_string</a></li>
</ul>
</li>
</ul></div>
				</div>
			</div>
		</div>
		<script src="doc.js"></script>
		<script async src="search_index.js" type="text/javascript"></script>
	</body>
</html>